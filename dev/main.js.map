{"version":3,"sources":["../../node_modules/lodash.debounce/index.js","utils/is-mobile.js","../../node_modules/flubber/build/flubber.min.js","graphic.js","footer.js","main.js"],"names":["isMobile","android","navigator","userAgent","match","blackberry","ios","opera","windows","any","resize","init","Promise","all","d3","dsv","d","country","search","tele","overall","json","to","searchpoints","year","votepoints","from","then","rankingdata","geodata","points","votingdata","rankingHeight","rankingWidth","document","querySelector","clientWidth","rankingMargin","top","left","right","rankingSvg","select","attr","flagfilter","append","flagfeMerge","countryScale","scaleBand","domain","map","range","voteScale","scalePoint","padding","selectAll","data","enter","text","countryheight","line","x","key","y","value","bandwidth","curve","curveMonotoneX","linedata","forEach","el","obj","values","push","style","Country","html","i","mapWidth","mapHeight","mapPadding","mapSvg","extent","projection","geoAzimuthalEqualArea","rotate","fitExtent","geoPath","countries","features","properties","ADM0_A3","grid","ALB","ARM","AUS","AUT","AZE","BEL","BGR","BIH","BLR","CHE","CYP","CZE","DEU","DNK","ESP","EST","FIN","FRA","GBR","GEO","GRC","HUN","HRV","IRL","ISL","ISR","ITA","KOS","LTU","LUX","LVA","MDA","MKD","MLT","MNE","NLD","NOR","POL","PRT","ROU","RUS","SMR","SRB","SVK","SVN","SWE","UKR","TUR","filtervalues","cols","scaleSequential","interpolatePlasma","getCountryVotingData","filterparams","countryVotingData","filter","fromto","countryVoting","searchtele","colorMap","countrydata","reversefromto","transition","duration","countrypoints","length","rectDim","gridMargin","rectToPath","dim","on","selvalue","node","attrTween","setTimeout","bbox","getBBox","translate","getCTM","labelx","width","e","labely","height","f","cntr","remove","pointsMean","nest","rollup","mean","g","entries","maxSearchPoints","max","maxVotePoints","maxPoints","scatterWidth","scatterHeight","scatterMargins","bottom","scatterOverallSvg","defs","feMerge","scatterScaleX","scaleLinear","scatterScaleY","xAxis","axisBottom","tickValues","tickSize","yAxis","axisLeft","ticks","call","scatterLabels","labeldata","fallbackData","image","url","hed","storyData","loadJS","src","cb","ref","getElementsByTagName","script","createElement","async","parentNode","insertBefore","onload","loadStories","request","XMLHttpRequest","v","Date","now","open","status","JSON","parse","responseText","onerror","send","createLink","recircHTML","window","location","href","includes","slice","join","setupSocialJS","s","id","js","fjs","getElementById","$body","previousWidth","offsetWidth","graphic","setupStickyHeader","$header","classed","$menu","$toggle","visible","addEventListener","footer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzXA;AAEA,IAAMA,QAAQ,GAAG;AAChBC,EAAAA,OAAO,EAAE;AAAA,WAAMC,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,UAA1B,CAAN;AAAA,GADO;AAGhBC,EAAAA,UAAU,EAAE;AAAA,WAAMH,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAN;AAAA,GAHI;AAKhBE,EAAAA,GAAG,EAAE;AAAA,WAAMJ,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,mBAA1B,CAAN;AAAA,GALW;AAOhBG,EAAAA,KAAK,EAAE;AAAA,WAAML,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAN;AAAA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","file":"main.js","sourceRoot":"../src/js","sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","// device sniffing for mobile\n\nconst isMobile = {\n\tandroid: () => navigator.userAgent.match(/Android/i),\n\n\tblackberry: () => navigator.userAgent.match(/BlackBerry/i),\n\n\tios: () => navigator.userAgent.match(/iPhone|iPad|iPod/i),\n\n\topera: () => navigator.userAgent.match(/Opera Mini/i),\n\n\twindows: () => navigator.userAgent.match(/IEMobile/i),\n\n\tany: () => (\n\t\tisMobile.android() ||\n\t\tisMobile.blackberry() ||\n\t\tisMobile.ios() ||\n\t\tisMobile.opera() ||\n\t\tisMobile.windows()\n\t),\n}\n\nexport default isMobile\n","!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(t.flubber=t.flubber||{})}(this,function(t){\"use strict\";function n(t){return 10===t||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&an.indexOf(t)>=0}function e(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function r(t){return t>=48&&t<=57}function i(t){return t>=48&&t<=57||43===t||45===t||46===t}function a(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err=\"\",this.segmentStart=0,this.data=[]}function o(t){for(;t.index<t.max&&n(t.path.charCodeAt(t.index));)t.index++}function s(t){var n,e=t.index,i=e,a=t.max,o=!1,s=!1,h=!1,u=!1;if(i>=a)return void(t.err=\"SvgPath: missed param (at pos \"+i+\")\");if(n=t.path.charCodeAt(i),43!==n&&45!==n||(i++,n=i<a?t.path.charCodeAt(i):0),!r(n)&&46!==n)return void(t.err=\"SvgPath: param should start with 0..9 or `.` (at pos \"+i+\")\");if(46!==n){if(o=48===n,i++,n=i<a?t.path.charCodeAt(i):0,o&&i<a&&n&&r(n))return void(t.err=\"SvgPath: numbers started with `0` such as `09` are ilegal (at pos \"+e+\")\");for(;i<a&&r(t.path.charCodeAt(i));)i++,s=!0;n=i<a?t.path.charCodeAt(i):0}if(46===n){for(u=!0,i++;r(t.path.charCodeAt(i));)i++,h=!0;n=i<a?t.path.charCodeAt(i):0}if(101===n||69===n){if(u&&!s&&!h)return void(t.err=\"SvgPath: invalid float exponent (at pos \"+i+\")\");if(i++,n=i<a?t.path.charCodeAt(i):0,43!==n&&45!==n||i++,!(i<a&&r(t.path.charCodeAt(i))))return void(t.err=\"SvgPath: invalid float exponent (at pos \"+i+\")\");for(;i<a&&r(t.path.charCodeAt(i));)i++}t.index=i,t.param=parseFloat(t.path.slice(e,i))+0}function h(t){var n,e;n=t.path[t.segmentStart],e=n.toLowerCase();var r=t.data;if(\"m\"===e&&r.length>2&&(t.result.push([n,r[0],r[1]]),r=r.slice(2),e=\"l\",n=\"m\"===n?\"l\":\"L\"),\"r\"===e)t.result.push([n].concat(r));else for(;r.length>=rn[e]&&(t.result.push([n].concat(r.splice(0,rn[e]))),rn[e]););}function u(t){var n,r,a,u,c=t.max;if(t.segmentStart=t.index,n=t.path.charCodeAt(t.index),!e(n))return void(t.err=\"SvgPath: bad command \"+t.path[t.index]+\" (at pos \"+t.index+\")\");if(a=rn[t.path[t.index].toLowerCase()],t.index++,o(t),t.data=[],!a)return void h(t);for(r=!1;;){for(u=a;u>0;u--){if(s(t),t.err.length)return;t.data.push(t.param),o(t),r=!1,t.index<c&&44===t.path.charCodeAt(t.index)&&(t.index++,o(t),r=!0)}if(!r){if(t.index>=t.max)break;if(!i(t.path.charCodeAt(t.index)))break}}h(t)}function c(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}function f(){if(!(this instanceof f))return new f;this.queue=[],this.cache=null}function l(t,n,e,r){var i=t*r-n*e<0?-1:1,a=Math.sqrt(t*t+n*n),o=Math.sqrt(t*t+n*n),s=t*e+n*r,h=s/(a*o);return h>1&&(h=1),h<-1&&(h=-1),i*Math.acos(h)}function p(t,n,e,r,i,a,o,s,h,u){var c=u*(t-e)/2+h*(n-r)/2,f=-h*(t-e)/2+u*(n-r)/2,p=o*o,g=s*s,v=c*c,x=f*f,y=p*g-p*x-g*v;y<0&&(y=0),y/=p*x+g*v,y=Math.sqrt(y)*(i===a?-1:1);var d=y*o/s*f,m=y*-s/o*c,M=u*d-h*m+(t+e)/2,w=h*d+u*m+(n+r)/2,b=(c-d)/o,L=(f-m)/s,A=(-c-d)/o,q=(-f-m)/s,k=l(1,0,b,L),P=l(b,L,A,q);return 0===a&&P>0&&(P-=ln),1===a&&P<0&&(P+=ln),[M,w,k,P]}function g(t,n){var e=4/3*Math.tan(n/4),r=Math.cos(t),i=Math.sin(t),a=Math.cos(t+n),o=Math.sin(t+n);return[r,i,r-i*e,i+r*e,a+o*e,o-a*e,a,o]}function v(t,n,e){if(!(this instanceof v))return new v(t,n,e);this.rx=t,this.ry=n,this.ax=e}function x(t){if(!(this instanceof x))return new x(t);var n=on(t);this.segments=n.segments,this.err=n.err,this.__stack=[]}function y(t){var n=t.match(wn);return n?n.map(Number):[]}function d(t,n,e,r,i,a,o,s){this.a={x:t,y:n},this.b={x:e,y:r},this.c={x:i,y:a},this.d={x:o,y:s},null!==o&&void 0!==o&&null!==s&&void 0!==s?(this.getArcLength=_,this.getPoint=L,this.getDerivative=M):(this.getArcLength=A,this.getPoint=b,this.getDerivative=m),this.init()}function m(t,n,e){return{x:2*(1-e)*(t[1]-t[0])+2*e*(t[2]-t[1]),y:2*(1-e)*(n[1]-n[0])+2*e*(n[2]-n[1])}}function M(t,n,e){return b([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(n[1]-n[0]),3*(n[2]-n[1]),3*(n[3]-n[2])],e)}function w(t,n,e,r,i){for(var a=1,o=t/n,s=(t-e(r,i,o))/n;a>.001;){var h=e(r,i,o+s),u=e(r,i,o-s),c=Math.abs(t-h)/n,f=Math.abs(t-u)/n;c<a?(a=c,o+=s):f<a?(a=f,o-=s):s/=2}return o}function b(t,n,e){return{x:(1-e)*(1-e)*t[0]+2*(1-e)*e*t[1]+e*e*t[2],y:(1-e)*(1-e)*n[0]+2*(1-e)*e*n[1]+e*e*n[2]}}function L(t,n,e){return{x:(1-e)*(1-e)*(1-e)*t[0]+3*(1-e)*(1-e)*e*t[1]+3*(1-e)*e*e*t[2]+e*e*e*t[3],y:(1-e)*(1-e)*(1-e)*n[0]+3*(1-e)*(1-e)*e*n[1]+3*(1-e)*e*e*n[2]+e*e*e*n[3]}}function A(t,n,e){void 0===e&&(e=1);var r=t[0]-2*t[1]+t[2],i=n[0]-2*n[1]+n[2],a=2*t[1]-2*t[0],o=2*n[1]-2*n[0],s=4*(r*r+i*i),h=4*(r*a+i*o),u=a*a+o*o;if(0===s)return e*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(n[2]-n[0],2));var c=h/(2*s),f=u/s,l=e+c,p=f-c*c;return Math.sqrt(s)/2*(l*Math.sqrt(l*l+p)-c*Math.sqrt(c*c+p)+p*Math.log(Math.abs((l+Math.sqrt(l*l+p))/(c+Math.sqrt(c*c+p)))))}function q(t,n){return qn[t][n]}function k(t,n,e){var r,i,a,o=e.length-1;if(0===o)return 0;if(0===t){for(i=0,a=0;a<=o;a++)i+=q(o,a)*Math.pow(1-n,o-a)*Math.pow(n,a)*e[a];return i}for(r=new Array(o),a=0;a<o;a++)r[a]=o*(e[a+1]-e[a]);return k(t-1,n,r)}function P(t,n,e){var r=k(1,e,t),i=k(1,e,n),a=r*r+i*i;return Math.sqrt(a)}function _(t,n,e){var r,i,a,o;void 0===e&&(e=1);for(r=e/2,i=0,a=0;a<20;a++)o=r*Ln[20][a]+r,i+=An[20][a]*P(t,n,o);return r*i}function E(t,n,e,r){var i=t*r-n*e<0?-1:1,a=t*e+n*r;return a>1&&(a=1),a<-1&&(a=-1),i*Math.acos(a)}function S(t,n,e,r,i,a,o,s,h,u){var c=u*(t-e)/2+h*(n-r)/2,f=-h*(t-e)/2+u*(n-r)/2,l=o*o,p=s*s,g=c*c,v=f*f,x=l*p-l*v-p*g;x<0&&(x=0),x/=l*v+p*g,x=Math.sqrt(x)*(i===a?-1:1);var y=x*o/s*f,d=x*-s/o*c,m=u*y-h*d+(t+e)/2,M=h*y+u*d+(n+r)/2,w=(c-y)/o,b=(f-d)/s,L=(-c-y)/o,A=(-f-d)/s,q=E(1,0,w,b),k=E(w,b,L,A);return 0===a&&k>0&&(k-=kn),1===a&&k<0&&(k+=kn),[m,M,q,k]}function C(t,n){var e=4/3*Math.tan(n/4),r=Math.cos(t),i=Math.sin(t),a=Math.cos(t+n),o=Math.sin(t+n);return[r,i,r-i*e,i+r*e,a+o*e,o-a*e,a,o]}function Z(t,n,e,r,i,a,o,s,h){var u=0,c=[],f=[];Pn(t,n,e,r,i,a,o,s,h).forEach(function(t){var n=new bn(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),e=n.getTotalLength();u+=e,c.push(e),f.push(n)}),this.length=u,this.partialLengths=c,this.curves=f}function T(t,n,e,r){this.x0=t,this.x1=n,this.y0=e,this.y1=r}function F(t,n){return Math.sqrt((t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1]))}function z(t,n,e){return[t[0]+(n[0]-t[0])*e,t[1]+(n[1]-t[1])*e]}function j(t,n){return F(t,n)<1e-9}function I(t,n,e){var r=t.map(function(t,e){return V(t,n[e])});return function(t){var n=r.map(function(n){return n(t)});return e?H(n):n}}function V(t,n){return function(e){return t.map(function(t,r){return t+e*(n[r]-t)})}}function X(t){return\"number\"==typeof t&&isFinite(t)}function Y(t){return G(t)?nn(t):[(t[0][0]+t[t.length-1][0])/2,(t[0][1]+t[t.length-1][1])/2]}function G(t){for(var n=0;n<t.length-2;n++){var e=t[n],r=t[n+1],i=t[n+2];if(e[0]*(r[1]-i[1])+r[0]*(i[1]-e[1])+i[0]*(e[1]-r[1]))return!0}return!1}function O(t){return new yn(t).abs()}function D(t){return t.toString().split(\"M\").map(function(t,n){return t=t.trim(),n&&t?\"M\"+t:t}).filter(function(t){return t})}function H(t){return\"M\"+t.join(\"L\")+\"Z\"}function N(t){return D(O(t))}function Q(t,n){var e=O(t);return U(e)||R(e,n)}function U(t){var n=t.segments||[],e=[];if(!n.length||\"M\"!==n[0][0])return!1;for(var r=0;r<n.length;r++){var i=n[r],a=i[0],o=i[1],s=i[2];if(\"M\"===a&&r||\"Z\"===a)break;if(\"M\"===a||\"L\"===a)e.push([o,s]);else if(\"H\"===a)e.push([o,e[e.length-1][1]]);else{if(\"V\"!==a)return!1;e.push([e[e.length-1][0],o])}}return!!e.length&&{ring:e}}function R(t,n){var e,r,i=D(t)[0],a=[],o=3;if(!i)throw new TypeError(Cn);r=B(i),e=r.getTotalLength(),n&&X(n)&&n>0&&(o=Math.max(o,Math.ceil(e/n)));for(var s=0;s<o;s++){var h=r.getPointAtLength(e*s/o);a.push([h.x,h.y])}return{ring:a,skipBisect:!0}}function B(t){if(\"undefined\"!=typeof window&&window&&window.document)try{var n=window.document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");return n.setAttributeNS(null,\"d\",t),n}catch(t){}return Sn(t)}function W(t,n){for(var e=t.length+n,r=en(t)/n,i=0,a=0,o=r/2;t.length<e;){var s=t[i],h=t[(i+1)%t.length],u=F(s,h);o<=a+u?(t.splice(i+1,0,u?z(s,h,(o-a)/u):s.slice(0)),o+=r):(a+=u,i++)}}function $(t,n){void 0===n&&(n=1/0);for(var e=0;e<t.length;e++)for(var r=t[e],i=e===t.length-1?t[0]:t[e+1];F(r,i)>n;)i=z(r,i,.5),t.splice(e+1,0,i)}function J(t,n){var e,r,i;if(\"string\"==typeof t){var a=Q(t,n);t=a.ring,i=a.skipBisect}else if(!Array.isArray(t))throw new TypeError(Cn);if(e=t.slice(0),!K(e))throw new TypeError(Cn);return e.length>1&&j(e[0],e[e.length-1])&&e.pop(),r=tn(e),r>0&&e.reverse(),!i&&n&&X(n)&&n>0&&$(e,n),e}function K(t){return t.every(function(t){return Array.isArray(t)&&t.length>=2&&X(t[0])&&X(t[1])})}function tt(t,n,e){var r;return r=t.length-n.length,W(t,r<0?-1*r:0),W(n,r>0?r:0),Tn(t,n),I(t,n,e)}function nt(t,n,e){e=e||2;var r=n&&n.length,i=r?n[0]*e:t.length,a=et(t,0,i,e,!0),o=[];if(!a)return o;var s,h,u,c,f,l,p;if(r&&(a=ut(t,n,a,e)),t.length>80*e){s=u=t[0],h=c=t[1];for(var g=e;g<i;g+=e)f=t[g],l=t[g+1],f<s&&(s=f),l<h&&(h=l),f>u&&(u=f),l>c&&(c=l);p=Math.max(u-s,c-h)}return it(a,o,e,s,h,p),o}function et(t,n,e,r,i){var a,o;if(i===Et(t,n,e,r)>0)for(a=n;a<e;a+=r)o=kt(a,t[a],t[a+1],o);else for(a=e-r;a>=n;a-=r)o=kt(a,t[a],t[a+1],o);return o&&Mt(o,o.next)&&(Pt(o),o=o.next),o}function rt(t,n){if(!t)return t;n||(n=t);var e,r=t;do{if(e=!1,r.steiner||!Mt(r,r.next)&&0!==mt(r.prev,r,r.next))r=r.next;else{if(Pt(r),(r=n=r.prev)===r.next)return null;e=!0}}while(e||r!==n);return n}function it(t,n,e,r,i,a,o){if(t){!o&&a&&pt(t,r,i,a);for(var s,h,u=t;t.prev!==t.next;)if(s=t.prev,h=t.next,a?ot(t,r,i,a):at(t))n.push(s.i/e),n.push(t.i/e),n.push(h.i/e),Pt(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?(t=st(t,n,e),it(t,n,e,r,i,a,2)):2===o&&ht(t,n,e,r,i,a):it(rt(t),n,e,r,i,a,1);break}}}function at(t){var n=t.prev,e=t,r=t.next;if(mt(n,e,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(yt(n.x,n.y,e.x,e.y,r.x,r.y,i.x,i.y)&&mt(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ot(t,n,e,r){var i=t.prev,a=t,o=t.next;if(mt(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,h=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=vt(s,h,n,e,r),l=vt(u,c,n,e,r),p=t.nextZ;p&&p.z<=l;){if(p!==t.prev&&p!==t.next&&yt(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&mt(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&yt(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&mt(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function st(t,n,e){var r=t;do{var i=r.prev,a=r.next.next;!Mt(i,a)&&wt(i,r,r.next,a)&&Lt(i,a)&&Lt(a,i)&&(n.push(i.i/e),n.push(r.i/e),n.push(a.i/e),Pt(r),Pt(r.next),r=t=a),r=r.next}while(r!==t);return r}function ht(t,n,e,r,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&dt(o,s)){var h=qt(o,s);return o=rt(o,o.next),h=rt(h,h.next),it(o,n,e,r,i,a),void it(h,n,e,r,i,a)}s=s.next}o=o.next}while(o!==t)}function ut(t,n,e,r){var i,a,o,s,h,u=[];for(i=0,a=n.length;i<a;i++)o=n[i]*r,s=i<a-1?n[i+1]*r:t.length,h=et(t,o,s,r,!1),h===h.next&&(h.steiner=!0),u.push(xt(h));for(u.sort(ct),i=0;i<u.length;i++)ft(u[i],e),e=rt(e,e.next);return e}function ct(t,n){return t.x-n.x}function ft(t,n){if(n=lt(t,n)){var e=qt(n,t);rt(e,e.next)}}function lt(t,n){var e,r=n,i=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}e=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!e)return null;if(i===o)return e.prev;var h,u=e,c=e.x,f=e.y,l=1/0;for(r=e.next;r!==u;)i>=r.x&&r.x>=c&&yt(a<f?i:o,a,c,f,a<f?o:i,a,r.x,r.y)&&((h=Math.abs(a-r.y)/(i-r.x))<l||h===l&&r.x>e.x)&&Lt(r,t)&&(e=r,l=h),r=r.next;return e}function pt(t,n,e,r){var i=t;do{null===i.z&&(i.z=vt(i.x,i.y,n,e,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,gt(i)}function gt(t){var n,e,r,i,a,o,s,h,u=1;do{for(e=t,t=null,a=null,o=0;e;){for(o++,r=e,s=0,n=0;n<u&&(s++,r=r.nextZ);n++);for(h=u;s>0||h>0&&r;)0===s?(i=r,r=r.nextZ,h--):0!==h&&r?e.z<=r.z?(i=e,e=e.nextZ,s--):(i=r,r=r.nextZ,h--):(i=e,e=e.nextZ,s--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;e=r}a.nextZ=null,u*=2}while(o>1);return t}function vt(t,n,e,r,i){return t=32767*(t-e)/i,n=32767*(n-r)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),t|n<<1}function xt(t){var n=t,e=t;do{n.x<e.x&&(e=n),n=n.next}while(n!==t);return e}function yt(t,n,e,r,i,a,o,s){return(i-o)*(n-s)-(t-o)*(a-s)>=0&&(t-o)*(r-s)-(e-o)*(n-s)>=0&&(e-o)*(a-s)-(i-o)*(r-s)>=0}function dt(t,n){return t.next.i!==n.i&&t.prev.i!==n.i&&!bt(t,n)&&Lt(t,n)&&Lt(n,t)&&At(t,n)}function mt(t,n,e){return(n.y-t.y)*(e.x-n.x)-(n.x-t.x)*(e.y-n.y)}function Mt(t,n){return t.x===n.x&&t.y===n.y}function wt(t,n,e,r){return!!(Mt(t,n)&&Mt(e,r)||Mt(t,r)&&Mt(e,n))||mt(t,n,e)>0!=mt(t,n,r)>0&&mt(e,r,t)>0!=mt(e,r,n)>0}function bt(t,n){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==n.i&&e.next.i!==n.i&&wt(e,e.next,t,n))return!0;e=e.next}while(e!==t);return!1}function Lt(t,n){return mt(t.prev,t,t.next)<0?mt(t,n,t.next)>=0&&mt(t,t.prev,n)>=0:mt(t,n,t.prev)<0||mt(t,t.next,n)<0}function At(t,n){var e=t,r=!1,i=(t.x+n.x)/2,a=(t.y+n.y)/2;do{e.y>a!=e.next.y>a&&i<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next}while(e!==t);return r}function qt(t,n){var e=new _t(t.i,t.x,t.y),r=new _t(n.i,n.x,n.y),i=t.next,a=n.prev;return t.next=n,n.prev=t,e.next=i,i.prev=e,r.next=e,e.prev=r,a.next=r,r.prev=a,r}function kt(t,n,e,r){var i=new _t(t,n,e);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Pt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function _t(t,n,e){this.i=t,this.x=n,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Et(t,n,e,r){for(var i=0,a=n,o=e-r;a<e;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}function St(t,n){var e=n.id,r=n.bbox,i=null==n.properties?{}:n.properties,a=Ct(t,n);return null==e&&null==r?{type:\"Feature\",properties:i,geometry:a}:null==r?{type:\"Feature\",id:e,properties:i,geometry:a}:{type:\"Feature\",id:e,bbox:r,properties:i,geometry:a}}function Ct(t,n){function e(t,n){n.length&&n.pop();for(var e=u[t<0?~t:t],r=0,i=e.length;r<i;++r)n.push(h(e[r],r));t<0&&Vn(n,i)}function r(t){return h(t)}function i(t){for(var n=[],r=0,i=t.length;r<i;++r)e(t[r],n);return n.length<2&&n.push(n[0]),n}function a(t){for(var n=i(t);n.length<4;)n.push(n[0]);return n}function o(t){return t.map(a)}function s(t){var n,e=t.type;switch(e){case\"GeometryCollection\":return{type:e,geometries:t.geometries.map(s)};case\"Point\":n=r(t.coordinates);break;case\"MultiPoint\":n=t.coordinates.map(r);break;case\"LineString\":n=i(t.arcs);break;case\"MultiLineString\":n=t.arcs.map(i);break;case\"Polygon\":n=o(t.arcs);break;case\"MultiPolygon\":n=t.arcs.map(o);break;default:return null}return{type:e,coordinates:n}}var h=In(t.transform),u=t.arcs;return s(n)}function Zt(t){for(var n,e=-1,r=t.length,i=t[r-1],a=0;++e<r;)n=i,i=t[e],a+=n[0]*i[1]-n[1]*i[0];return Math.abs(a)}function Tt(t,n){function e(t){switch(t.type){case\"GeometryCollection\":t.geometries.forEach(e);break;case\"Polygon\":r(t.arcs);break;case\"MultiPolygon\":t.arcs.forEach(r)}}function r(t){t.forEach(function(n){n.forEach(function(n){(a[n=n<0?~n:n]||(a[n]=[])).push(t)})}),o.push(t)}function i(n){return Zt(Ct(t,{type:\"Polygon\",arcs:[n]}).coordinates[0])}var a={},o=[],s=[];return n.forEach(e),o.forEach(function(t){if(!t._){var n=[],e=[t];for(t._=1,s.push(n);t=e.pop();)n.push(t),t.forEach(function(t){t.forEach(function(t){a[t<0?~t:t].forEach(function(t){t._||(t._=1,e.push(t))})})})}}),o.forEach(function(t){delete t._}),{type:\"MultiPolygon\",arcs:s.map(function(n){var e,r=[];if(n.forEach(function(t){t.forEach(function(t){t.forEach(function(t){a[t<0?~t:t].length<2&&r.push(t)})})}),r=Yn(t,r),(e=r.length)>1)for(var o,s,h=1,u=i(r[0]);h<e;++h)(o=i(r[h]))>u&&(s=r[0],r[0]=r[h],r[h]=s,u=o);return r})}}function Ft(t){return function(n,e){return Dn(t(n),e)}}function zt(t,n){var e={},r={type:\"Topology\",objects:{triangles:{type:\"GeometryCollection\",geometries:[]}},arcs:[]};return t.forEach(function(t){var i=[];t.forEach(function(t,a){var o=t[0]<t[1]?t.join(\",\"):t[1]+\",\"+t[0],s=t.map(function(t){return n[t]});o in e?i.push(~e[o]):(i.push(e[o]=r.arcs.length),r.arcs.push(s))}),r.objects.triangles.geometries.push({type:\"Polygon\",area:Math.abs(tn(t.map(function(t){return n[t[0]]}))),arcs:[i]})}),r.objects.triangles.geometries.sort(function(t,n){return t.area-n.area}),r}function jt(t,n){for(var e=t.objects.triangles.geometries,r=Hn(function(t){return t.area}).left;e.length>n;)!function(){var n=e[0],i=On(e)[0][0],a=e[i],o=Tt(t,[n,a]);o.area=n.area+a.area,o.type=\"Polygon\",o.arcs=o.arcs[0],e.splice(i,1),e.shift(),e.splice(r(e,o.area),0,o)}();if(n>e.length)throw new RangeError(\"Can't collapse topology into \"+n+\" pieces.\");return Xn(t,t.objects.triangles).features.map(function(t){return t.geometry.coordinates[0].pop(),t.geometry.coordinates[0]})}function It(t){for(var n=zn(t.reduce(function(t,n){return t.concat([n[0]],[n[1]])},[])),e=[],r=0,i=n.length;r<i;r+=3)e.push([[n[r],n[r+1]],[n[r+1],n[r+2]],[n[r+2],n[r]]]);return e}function Vt(t,n,e){function r(t,n,o){void 0===n&&(n=[]),void 0===o&&(o=0);for(var s=0;s<t.length;s++){var h=t.splice(s,1),u=e[h[0]][n.length];o+u<i&&(t.length?r(t.slice(),n.concat(h),o+u):(i=o+u,a=n.concat(h))),t.length&&t.splice(s,0,h[0])}}var i=1/0,a=t.map(function(t,n){return n});return r(a),a}function Xt(t,n){var e=F(Y(t),Y(n));return e*e}function Yt(t,n,e){void 0===e&&(e={});var r=e.maxSegmentLength;void 0===r&&(r=10);var i=e.string;void 0===i&&(i=!0);var a=e.single;void 0===a&&(a=!1);var o=J(t,r);o.length<n.length+2&&W(o,n.length+2-o.length);var s,h=Qn(o,n.length),u=n.map(function(t){return J(t,r)}),c=\"string\"==typeof t&&t;return a&&!n.every(function(t){return\"string\"==typeof t})||(s=n.slice(0)),Dt(h,u,{match:!0,string:i,single:a,t0:c,t1:s})}function Gt(t,n,e){void 0===e&&(e={});var r=e.maxSegmentLength;void 0===r&&(r=10);var i=e.string;void 0===i&&(i=!0);var a=e.single;void 0===a&&(a=!1);var o=Yt(n,t,{maxSegmentLength:r,string:i,single:a});return a?function(t){return o(1-t)}:o.map(function(t){return function(n){return t(1-n)}})}function Ot(t,n,e){void 0===e&&(e={});var r=e.maxSegmentLength;void 0===r&&(r=10);var i=e.string;void 0===i&&(i=!0);var a=e.single;if(void 0===a&&(a=!1),!Array.isArray(t)||!Array.isArray(n)||t.length!==n.length||!t.length)throw new TypeError(Zn);var o,s,h=function(t){return J(t,r)},u=t.map(h),c=n.map(h);return a?(t.every(function(t){return\"string\"==typeof t})&&(o=t.slice(0)),n.every(function(t){return\"string\"==typeof t})&&(s=n.slice(0))):(o=t.slice(0),s=n.slice(0)),Dt(u,c,{string:i,single:a,t0:o,t1:s,match:!1})}function Dt(t,n,e){void 0===e&&(e={});var r=e.string,i=e.single,a=e.t0,o=e.t1,s=e.match,h=s?Un(t,n):t.map(function(t,n){return n}),u=h.map(function(e,i){return tt(t[e],n[i],r)});if(s&&Array.isArray(a)&&(a=h.map(function(t){return a[t]})),i&&r&&(Array.isArray(a)&&(a=a.join(\" \")),Array.isArray(o)&&(o=o.join(\" \"))),i){var c=r?function(t){return u.map(function(n){return n(t)}).join(\" \")}:function(t){return u.map(function(n){return n(t)})};return r&&(a||o)?function(t){return t<1e-4&&a||1-t<1e-4&&o||c(t)}:c}return r?(a=Array.isArray(a)?a.map(function(t){return\"string\"==typeof t&&t}):[],o=Array.isArray(o)?o.map(function(t){return\"string\"==typeof t&&t}):[],u.map(function(t,n){return a[n]||o[n]?function(e){return e<1e-4&&a[n]||1-e<1e-4&&o[n]||t(e)}:t})):u}function Ht(t,n,e,r,i){return Rt(Bt(t,n,e),r,Jt(t,n,e),2*Math.PI*e,i)}function Nt(t,n,e,r,i){var a=Ht(n,e,r,t,i);return function(t){return a(1-t)}}function Qt(t,n,e,r,i,a){return Rt(Wt(t,n,e,r),i,Kt(t,n,e,r),2*e+2*r,a)}function Ut(t,n,e,r,i,a){var o=Qt(n,e,r,i,t,a);return function(t){return o(1-t)}}function Rt(t,n,e,r,i){void 0===i&&(i={});var a=i.maxSegmentLength;void 0===a&&(a=10);var o=i.string;void 0===o&&(o=!0);var s,h,u=J(n,a);return X(r)&&u.length<r/a&&W(u,Math.ceil(r/a-u.length)),s=t(u),h=I(s,u,o),o?function(t){return t<1e-4?e:h(t)}:h}function Bt(t,n,e){return function(r){var i=Y(r),a=en(r.concat([r[0]])),o=Math.atan2(r[0][1]-i[1],r[0][0]-i[0]),s=0;return r.map(function(i,h){var u;return h&&(s+=F(i,r[h-1])),u=o+2*Math.PI*(a?s/a:h/r.length),[Math.cos(u)*e+t,Math.sin(u)*e+n]})}}function Wt(t,n,e,r){return function(i){var a=Y(i),o=en(i.concat([i[0]])),s=Math.atan2(i[0][1]-a[1],i[0][0]-a[0]),h=0;s<0&&(s=2*Math.PI+s);var u=s/(2*Math.PI);return i.map(function(a,s){s&&(h+=F(a,i[s-1]));var c=$t((u+(o?h/o:s/i.length))%1);return[t+c[0]*e,n+c[1]*r]})}}function $t(t){return t<=1/8?[1,.5+4*t]:t<=3/8?[1.5-4*t,1]:t<=5/8?[0,2.5-4*t]:t<=7/8?[4*t-2.5,0]:[1,4*t-3.5]}function Jt(t,n,e){var r=t-e+\",\"+n,i=t+e+\",\"+n,a=\"A\"+e+\",\"+e+\",0,1,1,\";return\"M\"+r+a+i+a+r+\"Z\"}function Kt(t,n,e,r){var i=t+e,a=n+r;return\"M\"+t+\",\"+n+\"L\"+i+\",\"+n+\"L\"+i+\",\"+a+\"L\"+t+\",\"+a+\"Z\"}var tn=function(t){for(var n,e=-1,r=t.length,i=t[r-1],a=0;++e<r;)n=i,i=t[e],a+=n[1]*i[0]-n[0]*i[1];return a/2},nn=function(t){for(var n,e,r=-1,i=t.length,a=0,o=0,s=t[i-1],h=0;++r<i;)n=s,s=t[r],h+=e=n[0]*s[1]-s[0]*n[1],a+=(n[0]+s[0])*e,o+=(n[1]+s[1])*e;return h*=3,[a/h,o/h]},en=function(t){for(var n,e,r=-1,i=t.length,a=t[i-1],o=a[0],s=a[1],h=0;++r<i;)n=o,e=s,a=t[r],o=a[0],s=a[1],n-=o,e-=s,h+=Math.sqrt(n*n+e*e);return h},rn={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},an=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279],on=function(t){var n=new a(t),e=n.max;for(o(n);n.index<e&&!n.err.length;)u(n);return n.err.length?n.result=[]:n.result.length&&(\"mM\".indexOf(n.result[0][0])<0?(n.err=\"SvgPath: string should start with `M` or `m`\",n.result=[]):n.result[0][0]=\"M\"),{err:n.err,segments:n.result}};f.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]?this:(this.cache=null,this.queue.push(t),this)},f.prototype.translate=function(t,n){return 0===t&&0===n||(this.cache=null,this.queue.push([1,0,0,1,t,n])),this},f.prototype.scale=function(t,n){return 1===t&&1===n||(this.cache=null,this.queue.push([t,0,0,n,0,0])),this},f.prototype.rotate=function(t,n,e){var r,i,a;return 0!==t&&(this.translate(n,e),r=t*Math.PI/180,i=Math.cos(r),a=Math.sin(r),this.queue.push([i,a,-a,i,0,0]),this.cache=null,this.translate(-n,-e)),this},f.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},f.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},f.prototype.toArray=function(){var t=this;if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var n=1;n<this.queue.length;n++)t.cache=c(t.cache,t.queue[n]);return this.cache},f.prototype.calc=function(t,n,e){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),r=this.cache,[t*r[0]+n*r[2]+(e?0:r[4]),t*r[1]+n*r[3]+(e?0:r[5])]):[t,n]};var sn=f,hn={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},un=/\\s*(matrix|translate|scale|rotate|skewX|skewY)\\s*\\(\\s*(.+?)\\s*\\)[\\s,]*/,cn=/[\\s,]+/,fn=function(t){var n,e,r=new sn;return t.split(un).forEach(function(t){if(t.length){if(void 0!==hn[t])return void(n=t);switch(e=t.split(cn).map(function(t){return+t||0}),n){case\"matrix\":return void(6===e.length&&r.matrix(e));case\"scale\":return void(1===e.length?r.scale(e[0],e[0]):2===e.length&&r.scale(e[0],e[1]));case\"rotate\":return void(1===e.length?r.rotate(e[0],0,0):3===e.length&&r.rotate(e[0],e[1],e[2]));case\"translate\":return void(1===e.length?r.translate(e[0],0):2===e.length&&r.translate(e[0],e[1]));case\"skewX\":return void(1===e.length&&r.skewX(e[0]));case\"skewY\":return void(1===e.length&&r.skewY(e[0]))}}}),r},ln=2*Math.PI,pn=function(t,n,e,r,i,a,o,s,h){var u=Math.sin(h*ln/360),c=Math.cos(h*ln/360),f=c*(t-e)/2+u*(n-r)/2,l=-u*(t-e)/2+c*(n-r)/2;if(0===f&&0===l)return[];if(0===o||0===s)return[];o=Math.abs(o),s=Math.abs(s);var v=f*f/(o*o)+l*l/(s*s);v>1&&(o*=Math.sqrt(v),s*=Math.sqrt(v));var x=p(t,n,e,r,i,a,o,s,u,c),y=[],d=x[2],m=x[3],M=Math.max(Math.ceil(Math.abs(m)/(ln/4)),1);m/=M;for(var w=0;w<M;w++)y.push(g(d,m)),d+=m;return y.map(function(t){for(var n=0;n<t.length;n+=2){var e=t[n+0],r=t[n+1];e*=o,r*=s;var i=c*e-u*r,a=u*e+c*r;t[n+0]=i+x[0],t[n+1]=a+x[1]}return t})},gn=Math.PI/180;v.prototype.transform=function(t){var n=Math.cos(this.ax*gn),e=Math.sin(this.ax*gn),r=[this.rx*(t[0]*n+t[2]*e),this.rx*(t[1]*n+t[3]*e),this.ry*(-t[0]*e+t[2]*n),this.ry*(-t[1]*e+t[3]*n)],i=r[0]*r[0]+r[2]*r[2],a=r[1]*r[1]+r[3]*r[3],o=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),s=(i+a)/2;if(o<1e-10*s)return this.rx=this.ry=Math.sqrt(s),this.ax=0,this;var h=r[0]*r[1]+r[2]*r[3];o=Math.sqrt(o);var u=s+o/2,c=s-o/2;return this.ax=Math.abs(h)<1e-10&&Math.abs(u-a)<1e-10?90:180*Math.atan(Math.abs(h)>Math.abs(u-a)?(u-i)/h:h/(u-a))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)):(this.ax+=90,this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)),this},v.prototype.isDegenerate=function(){return this.rx<1e-10*this.ry||this.ry<1e-10*this.rx};var vn=v;x.prototype.__matrix=function(t){var n,e=this;t.queue.length&&this.iterate(function(r,i,a,o){var s,h,u,c;switch(r[0]){case\"v\":s=t.calc(0,r[1],!0),h=0===s[0]?[\"v\",s[1]]:[\"l\",s[0],s[1]];break;case\"V\":s=t.calc(a,r[1],!1),h=s[0]===t.calc(a,o,!1)[0]?[\"V\",s[1]]:[\"L\",s[0],s[1]];break;case\"h\":s=t.calc(r[1],0,!0),h=0===s[1]?[\"h\",s[0]]:[\"l\",s[0],s[1]];break;case\"H\":s=t.calc(r[1],o,!1),h=s[1]===t.calc(a,o,!1)[1]?[\"H\",s[0]]:[\"L\",s[0],s[1]];break;case\"a\":case\"A\":var f=t.toArray(),l=vn(r[1],r[2],r[3]).transform(f);if(f[0]*f[3]-f[1]*f[2]<0&&(r[5]=r[5]?\"0\":\"1\"),s=t.calc(r[6],r[7],\"a\"===r[0]),\"A\"===r[0]&&r[6]===a&&r[7]===o||\"a\"===r[0]&&0===r[6]&&0===r[7]){h=[\"a\"===r[0]?\"l\":\"L\",s[0],s[1]];break}h=l.isDegenerate()?[\"a\"===r[0]?\"l\":\"L\",s[0],s[1]]:[r[0],l.rx,l.ry,l.ax,r[4],r[5],s[0],s[1]];break;case\"m\":c=i>0,s=t.calc(r[1],r[2],c),h=[\"m\",s[0],s[1]];break;default:for(u=r[0],h=[u],c=u.toLowerCase()===u,n=1;n<r.length;n+=2)s=t.calc(r[n],r[n+1],c),h.push(s[0],s[1])}e.segments[i]=h},!0)},x.prototype.__evaluateStack=function(){var t,n,e=this;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=sn(),n=this.__stack.length;--n>=0;)t.matrix(e.__stack[n].toArray());this.__matrix(t),this.__stack=[]}},x.prototype.toString=function(){var t,n,e=this,r=[];this.__evaluateStack();for(var i=0;i<this.segments.length;i++)n=e.segments[i][0],t=i>0&&\"m\"!==n&&\"M\"!==n&&n===e.segments[i-1][0],r=r.concat(t?e.segments[i].slice(1):e.segments[i]);return r.join(\" \").replace(/ ?([achlmqrstvz]) ?/gi,\"$1\").replace(/ \\-/g,\"-\").replace(/zm/g,\"z m\")},x.prototype.translate=function(t,n){return this.__stack.push(sn().translate(t,n||0)),this},x.prototype.scale=function(t,n){return this.__stack.push(sn().scale(t,n||0===n?n:t)),this},x.prototype.rotate=function(t,n,e){return this.__stack.push(sn().rotate(t,n||0,e||0)),this},x.prototype.skewX=function(t){return this.__stack.push(sn().skewX(t)),this},x.prototype.skewY=function(t){return this.__stack.push(sn().skewY(t)),this},x.prototype.matrix=function(t){return this.__stack.push(sn().matrix(t)),this},x.prototype.transform=function(t){return t.trim()?(this.__stack.push(fn(t)),this):this},x.prototype.round=function(t){var n,e=0,r=0,i=0,a=0;return t=t||0,this.__evaluateStack(),this.segments.forEach(function(o){var s=o[0].toLowerCase()===o[0];switch(o[0]){case\"H\":case\"h\":return s&&(o[1]+=i),i=o[1]-o[1].toFixed(t),void(o[1]=+o[1].toFixed(t));case\"V\":case\"v\":return s&&(o[1]+=a),a=o[1]-o[1].toFixed(t),void(o[1]=+o[1].toFixed(t));case\"Z\":case\"z\":return i=e,void(a=r);case\"M\":case\"m\":return s&&(o[1]+=i,o[2]+=a),i=o[1]-o[1].toFixed(t),a=o[2]-o[2].toFixed(t),e=i,r=a,o[1]=+o[1].toFixed(t),void(o[2]=+o[2].toFixed(t));case\"A\":case\"a\":return s&&(o[6]+=i,o[7]+=a),i=o[6]-o[6].toFixed(t),a=o[7]-o[7].toFixed(t),o[1]=+o[1].toFixed(t),o[2]=+o[2].toFixed(t),o[3]=+o[3].toFixed(t+2),o[6]=+o[6].toFixed(t),void(o[7]=+o[7].toFixed(t));default:return n=o.length,s&&(o[n-2]+=i,o[n-1]+=a),i=o[n-2]-o[n-2].toFixed(t),a=o[n-1]-o[n-1].toFixed(t),void o.forEach(function(n,e){e&&(o[e]=+o[e].toFixed(t))})}}),this},x.prototype.iterate=function(t,n){var e,r,i,a=this.segments,o={},s=!1,h=0,u=0,c=0,f=0;if(n||this.__evaluateStack(),a.forEach(function(n,e){var r=t(n,e,h,u);Array.isArray(r)&&(o[e]=r,s=!0);var i=n[0]===n[0].toLowerCase();switch(n[0]){case\"m\":case\"M\":return h=n[1]+(i?h:0),u=n[2]+(i?u:0),c=h,void(f=u);case\"h\":case\"H\":return void(h=n[1]+(i?h:0));case\"v\":case\"V\":return void(u=n[1]+(i?u:0));case\"z\":case\"Z\":return h=c,void(u=f);default:h=n[n.length-2]+(i?h:0),u=n[n.length-1]+(i?u:0)}}),!s)return this;for(i=[],e=0;e<a.length;e++)if(void 0!==o[e])for(r=0;r<o[e].length;r++)i.push(o[e][r]);else i.push(a[e]);return this.segments=i,this},x.prototype.abs=function(){return this.iterate(function(t,n,e,r){var i,a=t[0],o=a.toUpperCase();if(a!==o)switch(t[0]=o,a){case\"v\":return void(t[1]+=r);case\"a\":return t[6]+=e,void(t[7]+=r);default:for(i=1;i<t.length;i++)t[i]+=i%2?e:r}},!0),this},x.prototype.rel=function(){return this.iterate(function(t,n,e,r){var i,a=t[0],o=a.toLowerCase();if(a!==o&&(0!==n||\"M\"!==a))switch(t[0]=o,a){case\"V\":return void(t[1]-=r);case\"A\":return t[6]-=e,void(t[7]-=r);default:for(i=1;i<t.length;i++)t[i]-=i%2?e:r}},!0),this},x.prototype.unarc=function(){return this.iterate(function(t,n,e,r){var i,a,o,s=[],h=t[0];return\"A\"!==h&&\"a\"!==h?null:(\"a\"===h?(a=e+t[6],o=r+t[7]):(a=t[6],o=t[7]),i=pn(e,r,a,o,t[4],t[5],t[1],t[2],t[3]),0===i.length?[[\"a\"===t[0]?\"l\":\"L\",t[6],t[7]]]:(i.forEach(function(t){s.push([\"C\",t[2],t[3],t[4],t[5],t[6],t[7]])}),s))}),this},x.prototype.unshort=function(){var t,n,e,r,i,a=this.segments;return this.iterate(function(o,s,h,u){var c,f=o[0],l=f.toUpperCase();s&&(\"T\"===l?(c=\"t\"===f,e=a[s-1],\"Q\"===e[0]?(t=e[1]-h,n=e[2]-u):\"q\"===e[0]?(t=e[1]-e[3],n=e[2]-e[4]):(t=0,n=0),r=-t,i=-n,c||(r+=h,i+=u),a[s]=[c?\"q\":\"Q\",r,i,o[1],o[2]]):\"S\"===l&&(c=\"s\"===f,e=a[s-1],\"C\"===e[0]?(t=e[3]-h,n=e[4]-u):\"c\"===e[0]?(t=e[3]-e[5],n=e[4]-e[6]):(t=0,n=0),r=-t,i=-n,c||(r+=h,i+=u),a[s]=[c?\"c\":\"C\",r,i,o[1],o[2],o[3],o[4]]))}),this};var xn=x,yn=xn,dn={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},mn=/([astvzqmhlc])([^astvzqmhlc]*)/gi,Mn=function(t){var n=[];return t.replace(mn,function(t,e,r){var i=e.toLowerCase();for(r=y(r),\"m\"===i&&r.length>2&&(n.push([e].concat(r.splice(0,2))),i=\"l\",e=\"m\"===e?\"l\":\"L\");r.length>=0;){if(r.length===dn[i])return r.unshift(e),n.push(r);if(r.length<dn[i])throw new Error(\"malformed path data\");n.push([e].concat(r.splice(0,dn[i])))}}),n},wn=/-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/gi,bn=function(t,n,e,r,i,a,o,s){return new d(t,n,e,r,i,a,o,s)};d.prototype={constructor:d,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var n=w(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n)},getTangentAtLength:function(t){var n=w(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),e=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],n),r=Math.sqrt(e.x*e.x+e.y*e.y);return r>0?{x:e.x/r,y:e.y/r}:{x:0,y:0}},getPropertiesAtLength:function(t){var n,e=w(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),r=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),i=Math.sqrt(r.x*r.x+r.y*r.y);n=i>0?{x:r.x/i,y:r.y/i}:{\nx:0,y:0};var a=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e);return{x:a.x,y:a.y,tangentX:n.x,tangentY:n.y}}};var Ln=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],An=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],qn=[[1],[1,1],[1,2,1],[1,3,3,1]],kn=2*Math.PI,Pn=function(t,n,e,r,i,a,o,s,h){var u=Math.sin(i*kn/360),c=Math.cos(i*kn/360),f=c*(t-s)/2+u*(n-h)/2,l=-u*(t-s)/2+c*(n-h)/2;if(0===f&&0===l)return[];if(0===e||0===r)return[];e=Math.abs(e),r=Math.abs(r);var p=f*f/(e*e)+l*l/(r*r);p>1&&(e*=Math.sqrt(p),r*=Math.sqrt(p));var g=S(t,n,s,h,a,o,e,r,u,c),v=[],x=g[2],y=g[3],d=Math.max(Math.ceil(Math.abs(y)/(kn/4)),1);y/=d;for(var m=0;m<d;m++)v.push(C(x,y)),x+=y;return v.map(function(t){for(var n=0;n<t.length;n+=2){var i=t[n+0],a=t[n+1];i*=e,a*=r;var o=c*i-u*a,s=u*i+c*a;t[n+0]=o+g[0],t[n+1]=s+g[1]}return t})},_n=function(t,n,e,r,i,a,o,s,h){return new Z(t,n,e,r,i,a,o,s,h)};Z.prototype={constructor:Z,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){var n=this;t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var r=0,i=0;i<e;i++)r+=n.partialLengths[i];return this.curves[e].getPointAtLength(t-r)},getTangentAtLength:function(t){var n=this;t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var r=0,i=0;i<e;i++)r+=n.partialLengths[i];return this.curves[e].getTangentAtLength(t-r)},getPropertiesAtLength:function(t){var n=this.getTangentAtLength(t),e=this.getPointAtLength(t);return{x:e.x,y:e.y,tangentX:n.x,tangentY:n.y}}};var En=function(t,n,e,r){return new T(t,n,e,r)};T.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},T.prototype.getPointAtLength=function(t){var n=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),e=(this.x1-this.x0)*n,r=(this.y1-this.y0)*n;return{x:this.x0+e,y:this.y0+r}},T.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},T.prototype.getPropertiesAtLength=function(t){var n=this.getPointAtLength(t),e=this.getTangentAtLength();return{x:n.x,y:n.y,tangentX:e.x,tangentY:e.y}};var Sn=function(t){function n(t){if(!t)return null;for(var a,o=Mn(t),s=[0,0],h=[0,0],u=0;u<o.length;u++)\"M\"===o[u][0]?(s=[o[u][1],o[u][2]],i.push(null)):\"m\"===o[u][0]?(s=[o[u][1]+s[0],o[u][2]+s[1]],i.push(null)):\"L\"===o[u][0]?(e+=Math.sqrt(Math.pow(s[0]-o[u][1],2)+Math.pow(s[1]-o[u][2],2)),i.push(new En(s[0],o[u][1],s[1],o[u][2])),s=[o[u][1],o[u][2]]):\"l\"===o[u][0]?(e+=Math.sqrt(Math.pow(o[u][1],2)+Math.pow(o[u][2],2)),i.push(new En(s[0],o[u][1]+s[0],s[1],o[u][2]+s[1])),s=[o[u][1]+s[0],o[u][2]+s[1]]):\"H\"===o[u][0]?(e+=Math.abs(s[0]-o[u][1]),i.push(new En(s[0],o[u][1],s[1],s[1])),s[0]=o[u][1]):\"h\"===o[u][0]?(e+=Math.abs(o[u][1]),i.push(new En(s[0],s[0]+o[u][1],s[1],s[1])),s[0]=o[u][1]+s[0]):\"V\"===o[u][0]?(e+=Math.abs(s[1]-o[u][1]),i.push(new En(s[0],s[0],s[1],o[u][1])),s[1]=o[u][1]):\"v\"===o[u][0]?(e+=Math.abs(o[u][1]),i.push(new En(s[0],s[0],s[1],s[1]+o[u][1])),s[1]=o[u][1]+s[1]):\"z\"===o[u][0]||\"Z\"===o[u][0]?(e+=Math.sqrt(Math.pow(o[0][1]-s[0],2)+Math.pow(o[0][2]-s[1],2)),i.push(new En(s[0],o[0][1],s[1],o[0][2])),s=[o[0][1],o[0][2]]):\"C\"===o[u][0]?(a=new bn(s[0],s[1],o[u][1],o[u][2],o[u][3],o[u][4],o[u][5],o[u][6]),e+=a.getTotalLength(),s=[o[u][5],o[u][6]],i.push(a)):\"c\"===o[u][0]?(a=new bn(s[0],s[1],s[0]+o[u][1],s[1]+o[u][2],s[0]+o[u][3],s[1]+o[u][4],s[0]+o[u][5],s[1]+o[u][6]),e+=a.getTotalLength(),s=[o[u][5]+s[0],o[u][6]+s[1]],i.push(a)):\"S\"===o[u][0]?(a=u>0&&[\"C\",\"c\",\"S\",\"s\"].indexOf(o[u-1][0])>-1?new bn(s[0],s[1],2*s[0]-o[u-1][o[u-1].length-4],2*s[1]-o[u-1][o[u-1].length-3],o[u][1],o[u][2],o[u][3],o[u][4]):new bn(s[0],s[1],s[0],s[1],o[u][1],o[u][2],o[u][3],o[u][4]),e+=a.getTotalLength(),s=[o[u][3],o[u][4]],i.push(a)):\"s\"===o[u][0]?(a=u>0&&[\"C\",\"c\",\"S\",\"s\"].indexOf(o[u-1][0])>-1?new bn(s[0],s[1],s[0]+a.d.x-a.c.x,s[1]+a.d.y-a.c.y,s[0]+o[u][1],s[1]+o[u][2],s[0]+o[u][3],s[1]+o[u][4]):new bn(s[0],s[1],s[0],s[1],s[0]+o[u][1],s[1]+o[u][2],s[0]+o[u][3],s[1]+o[u][4]),e+=a.getTotalLength(),s=[o[u][3]+s[0],o[u][4]+s[1]],i.push(a)):\"Q\"===o[u][0]?(a=new bn(s[0],s[1],o[u][1],o[u][2],o[u][3],o[u][4]),e+=a.getTotalLength(),i.push(a),s=[o[u][3],o[u][4]],h=[o[u][1],o[u][2]]):\"q\"===o[u][0]?(a=new bn(s[0],s[1],s[0]+o[u][1],s[1]+o[u][2],s[0]+o[u][3],s[1]+o[u][4]),e+=a.getTotalLength(),h=[s[0]+o[u][1],s[1]+o[u][2]],s=[o[u][3]+s[0],o[u][4]+s[1]],i.push(a)):\"T\"===o[u][0]?(a=u>0&&[\"Q\",\"q\",\"T\",\"t\"].indexOf(o[u-1][0])>-1?new bn(s[0],s[1],2*s[0]-h[0],2*s[1]-h[1],o[u][1],o[u][2]):new En(s[0],o[u][1],s[1],o[u][2]),i.push(a),e+=a.getTotalLength(),h=[2*s[0]-h[0],2*s[1]-h[1]],s=[o[u][1],o[u][2]]):\"t\"===o[u][0]?(a=u>0&&[\"Q\",\"q\",\"T\",\"t\"].indexOf(o[u-1][0])>-1?new bn(s[0],s[1],2*s[0]-h[0],2*s[1]-h[1],s[0]+o[u][1],s[1]+o[u][2]):new En(s[0],s[0]+o[u][1],s[1],s[1]+o[u][2]),e+=a.getTotalLength(),h=[2*s[0]-h[0],2*s[1]-h[1]],s=[o[u][1]+s[0],o[u][2]+s[0]],i.push(a)):\"A\"===o[u][0]?(a=new _n(s[0],s[1],o[u][1],o[u][2],o[u][3],o[u][4],o[u][5],o[u][6],o[u][7]),e+=a.getTotalLength(),s=[o[u][6],o[u][7]],i.push(a)):\"a\"===o[u][0]&&(a=new _n(s[0],s[1],o[u][1],o[u][2],o[u][3],o[u][4],o[u][5],s[0]+o[u][6],s[1]+o[u][7]),e+=a.getTotalLength(),s=[s[0]+o[u][6],s[1]+o[u][7]],i.push(a)),r.push(e);return n}var e=0,r=[],i=[];n.getTotalLength=function(){return e},n.getPointAtLength=function(t){var n=a(t);return i[n.i].getPointAtLength(n.fraction)},n.getTangentAtLength=function(t){var n=a(t);return i[n.i].getTangentAtLength(n.fraction)},n.getPropertiesAtLength=function(t){var n=a(t);return i[n.i].getPropertiesAtLength(n.fraction)};var a=function(t){t<0?t=0:t>e&&(t=e);for(var n=r.length-1;r[n]>=t&&r[n]>0;)n--;return n++,{fraction:t-r[n-1],i:n}};return n(t)},Cn='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\\nExample valid ways of supplying a shape would be:\\n[[0, 0], [10, 0], [10, 10]]\\n\"M0,0 L10,0 L10,10Z\"\\n',Zn=\"flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\",Tn=function(t,n){for(var e,r,i,a=t.length,o=1/0,s=0;s<a;s++)!function(i){r=0,n.forEach(function(n,e){var o=F(t[(i+e)%a],n);r+=o*o}),r<o&&(o=r,e=i)}(s);e&&(i=t.splice(0,e),t.splice.apply(t,[t.length,0].concat(i)))},Fn=function(t,n,e){void 0===e&&(e={});var r=e.maxSegmentLength;void 0===r&&(r=10);var i=e.string;void 0===i&&(i=!0);var a=J(t,r),o=J(n,r),s=tt(a,o,i);return!i||\"string\"!=typeof t&&\"string\"!=typeof n?s:function(e){return e<1e-4&&\"string\"==typeof t?t:1-e<1e-4&&\"string\"==typeof n?n:s(e)}},zn=nt;nt.deviation=function(t,n,e,r){var i=n&&n.length,a=i?n[0]*e:t.length,o=Math.abs(Et(t,0,a,e));if(i)for(var s=0,h=n.length;s<h;s++){var u=n[s]*e,c=s<h-1?n[s+1]*e:t.length;o-=Math.abs(Et(t,u,c,e))}var f=0;for(s=0;s<r.length;s+=3){var l=r[s]*e,p=r[s+1]*e,g=r[s+2]*e;f+=Math.abs((t[l]-t[g])*(t[p+1]-t[l+1])-(t[l]-t[p])*(t[g+1]-t[l+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},nt.flatten=function(t){for(var n=t[0][0].length,e={vertices:[],holes:[],dimensions:n},r=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<n;o++)e.vertices.push(t[i][a][o]);i>0&&(r+=t[i-1].length,e.holes.push(r))}return e};var jn=function(t){return t},In=function(t){if(null==t)return jn;var n,e,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,s){s||(n=e=0);var h=2,u=t.length,c=new Array(u);for(c[0]=(n+=t[0])*r+a,c[1]=(e+=t[1])*i+o;h<u;)c[h]=t[h],++h;return c}},Vn=function(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e},Xn=function(t,n){return\"GeometryCollection\"===n.type?{type:\"FeatureCollection\",features:n.geometries.map(function(n){return St(t,n)})}:St(t,n)},Yn=function(t,n){function e(n){var e,r=t.arcs[n<0?~n:n],i=r[0];return t.transform?(e=[0,0],r.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=r[r.length-1],n<0?[e,i]:[i,e]}function r(t,n){for(var e in t){var r=t[e];delete n[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),s.push(r)}}var i={},a={},o={},s=[],h=-1;return n.forEach(function(e,r){var i,a=t.arcs[e<0?~e:e];a.length<3&&!a[1][0]&&!a[1][1]&&(i=n[++h],n[h]=e,n[r]=i)}),n.forEach(function(t){var n,r,i=e(t),s=i[0],h=i[1];if(n=o[s])if(delete o[n.end],n.push(t),n.end=h,r=a[h]){delete a[r.start];var u=r===n?n:n.concat(r);a[u.start=n.start]=o[u.end=r.end]=u}else a[n.start]=o[n.end]=n;else if(n=a[h])if(delete a[n.start],n.unshift(t),n.start=s,r=o[s]){delete o[r.end];var c=r===n?n:r.concat(n);a[c.start=r.start]=o[c.end=n.end]=c}else a[n.start]=o[n.end]=n;else n=[t],a[n.start=s]=o[n.end=h]=n}),r(o,a),r(a,o),n.forEach(function(t){i[t<0?~t:t]||s.push([t])}),s},Gn=function(t,n){for(var e=0,r=t.length;e<r;){var i=e+r>>>1;t[i]<n?e=i+1:r=i}return e},On=function(t){function n(t,n){t.forEach(function(t){t<0&&(t=~t);var e=i[t];e?e.push(n):i[t]=[n]})}function e(t,e){t.forEach(function(t){n(t,e)})}function r(t,n){\"GeometryCollection\"===t.type?t.geometries.forEach(function(t){r(t,n)}):t.type in o&&o[t.type](t.arcs,n)}var i={},a=t.map(function(){return[]}),o={LineString:n,MultiLineString:e,Polygon:e,MultiPolygon:function(t,n){t.forEach(function(t){e(t,n)})}};t.forEach(r);for(var s in i)for(var h=i[s],u=h.length,c=0;c<u;++c)for(var f=c+1;f<u;++f){var l,p=h[c],g=h[f];(l=a[p])[s=Gn(l,g)]!==g&&l.splice(s,0,g),(l=a[g])[s=Gn(l,p)]!==p&&l.splice(s,0,p)}return a},Dn=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},Hn=function(t){return 1===t.length&&(t=Ft(t)),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var a=r+i>>>1;t(n[a],e)<0?r=a+1:i=a}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var a=r+i>>>1;t(n[a],e)>0?i=a:r=a+1}return r}}},Nn=Hn(Dn),Qn=(Nn.right,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2),function(t,n){return jt(zt(It(t),t),n)}),Un=function(t,n){if(t.length>8)return t.map(function(t,n){return n});var e=t.map(function(t){return n.map(function(n){return Xt(t,n)})});return Vt(t,n,e)};t.interpolate=Fn,t.separate=Yt,t.combine=Gt,t.interpolateAll=Ot,t.splitPathString=N,t.toPathString=H,t.fromCircle=Ht,t.toCircle=Nt,t.fromRect=Qt,t.toRect=Ut,Object.defineProperty(t,\"__esModule\",{value:!0})});\n","/* global d3 */\nimport { separate, combine, splitPathString} from \"flubber\";\n\nfunction resize() {}\n\nfunction init() {\n\n  Promise.all([\n    d3.dsv(\",\", \"assets/data/ranking.csv\", function(d) {\n      return {\n        country: d.country,\n        search: +d.search,\n        tele: +d.tele,\n        overall: +d.overall\n      };\n    }),\n    d3.json('assets/data/eurovision_50m_simple.json'),\n    d3.dsv(\",\", \"assets/data/tele-search-by-year.csv\", function(d) {\n      return {\n        to: d.to,\n        searchpoints: +d.searchpoints,\n        year: +d.year,\n        votepoints: +d.votepoints\n      };\n    }),\n    d3.dsv(\",\", \"assets/data/votingdata_18.csv\", function(d){\n      return {\n        to: d.to,\n        from: d.from,\n        search: +d.search,\n        tele: +d.tele\n      }\n    })\n  ])\n  .then(([rankingdata, geodata, points, votingdata]) => {\n    /**RANKING **/\n    const rankingHeight = 800;\n    const rankingWidth = document.querySelector(\"#ranking-container\").clientWidth;\n    const rankingMargin = {top: 40, left: 80, right: 80};\n\n    let rankingSvg = d3.select(\"#ranking\")\n      .attr(\"width\", rankingWidth) \n      .attr(\"height\", rankingHeight)\n\n    let flagfilter = rankingSvg.append(\"filter\")\n      .attr(\"id\",\"flagglow\")\n      .attr(\"x\", \"-50%\")\n      .attr(\"y\", \"-50%\")\n      .attr(\"width\", \"200%\")\n      .attr(\"height\", \"200%\");\n    flagfilter.append(\"feGaussianBlur\")\n      .attr(\"stdDeviation\",\"3\")\n      .attr(\"result\",\"coloredBlur\");\n    let flagfeMerge = flagfilter.append(\"feMerge\");\n    flagfeMerge.append(\"feMergeNode\")\n      .attr(\"in\",\"coloredBlur\");\n    flagfeMerge.append(\"feMergeNode\")\n      .attr(\"in\",\"SourceGraphic\");\n\n    let countryScale = d3.scaleBand()\n      .domain(rankingdata.map((d) => d.country))\n      .range([rankingMargin.top, rankingHeight])\n    let voteScale = d3.scalePoint()\n      .domain([\"search\", \"tele\", \"overall\"])\n      .range([rankingMargin.left, rankingWidth - rankingMargin.right])\n      .padding(0);\n\n    rankingSvg.selectAll('text.header')\n      .data([\"search\", \"tele\", \"overall\"])\n      .enter().append(\"text\")\n      .attr('x', (d) => voteScale(d))\n      .attr('y', 20)\n      .text((d) => d)\n      .attr(\"class\", (d) => `label-${d}`)\n      .attr('text-anchor', 'middle')\n      .attr('font-size', '16px')\n      .attr('font-family', 'Rubik');\n\n    const countryheight = 24;\n\n    //Connecting lines\n    let line = d3.line()\n      .x((d) => voteScale(d.key))\n      .y((d) => d.value*countryScale.bandwidth() + countryheight/2)\n      .curve(d3.curveMonotoneX);\n      //.curve(d3.curveCatmullRom.alpha(1));\n\n    let linedata = [];\n    rankingdata.forEach(function(el){\n      let obj = {};\n      obj.country = el.country;\n      obj.values = [];\n      obj.values.push({\"key\": \"search\", \"value\": el.search});\n      obj.values.push({\"key\": \"tele\", \"value\": el.tele});\n      obj.values.push({\"key\": \"overall\", \"value\": el.overall});\n      linedata.push(obj)\n    });\n\n    rankingSvg.selectAll(\"line.connection\")\n      .data(linedata)\n      .enter().append(\"path\")\n      .attr(\"d\", (d) => line(d.values))\n      .style(\"stroke-width\", 1)\n      .style(\"stroke\", \"white\")\n      .style(\"fill\", \"none\")\n      .style(\"filter\", \"url(#flagglow)\");\n\n  //Left part, search results\n  rankingSvg.selectAll('image.flag')\n      .data(rankingdata)\n      .enter().append('image')\n      .attr(\"xlink:href\", function (d) { return 'assets/images/flags/' + d.country + '.svg' })\n      .attr('x', voteScale(\"search\") - countryheight/2)\n      //.attr('y', function (d, i) { return 30 + countryheight * i; })\n      .attr(\"y\", (d) => countryScale(d.country) - countryheight/2)\n      .attr('class', function (d) { return 'id-' + d.Country; })\n      .attr('width', countryheight - 2)\n      .attr('height', countryheight - 2)\n      .style(\"filter\", \"url(#flagglow)\");\n    rankingSvg.selectAll('image.question.tele')\n      .data(rankingdata)\n      .enter().append('image')\n      .attr(\"xlink:href\", function (d) { return 'assets/images/help-circle' + '.svg' })\n      .attr('x', voteScale(\"tele\") - countryheight/2)\n      .attr('y', (d) => countryScale(d.country) - countryheight/2)\n      .attr('class', 'question')\n      .attr('width', countryheight - 2)\n      .attr('height', countryheight - 2);\n    rankingSvg.selectAll('image.question.overall')\n      .data(rankingdata)\n      .enter().append('image')\n      .attr(\"xlink:href\", function (d) { return 'assets/images/help-circle' + '.svg' })\n      .attr('x', voteScale(\"overall\") - countryheight/2)\n      .attr('y', (d) => countryScale(d.country) - countryheight/2)\n      .attr('class', 'question')\n      .attr('width', countryheight - 2)\n      .attr('height', countryheight - 2);\n  rankingSvg.selectAll('text.countrylabel-left')\n      .data(rankingdata)\n      .enter().append('text')\n      .attr('x', 0)\n      .attr('y', (d) => countryScale(d.country))\n      .attr(\"dy\", \"0.3em\")\n      .style('font-family', 'Rubik')\n      .style('font-size', '14px')\n      .attr('class', function (d) { return 'countrylabel id-' + d.country; })\n      .attr('id', function (d) { return d.key; })\n      .html(function (d, i) { return (i + 1) + '. ' + d.country; });\n    rankingSvg.selectAll('text.countrylabel-right')\n      .data(rankingdata)\n      .enter().append('text')\n      .attr('x', rankingWidth)\n      .attr('y', (d) => countryScale(d.country))\n      .attr(\"dy\", \"0.3em\")\n      .style('font-family', 'Rubik')\n      .style('font-size', '14px')\n      .style('text-anchor', 'end')\n      .attr('class', function (d) { return 'countrylabel id-' + d.country; })\n      .attr('id', function (d) { return d.key; })\n      //.html(function (d, i) { return (i + 1) + '. ' + d.country; });\n      .html(function (d, i) { return (i + 1) + '. ???'; });\n\n  /** MAP **/\n  const mapWidth = 600;\n  const mapHeight = 600;\n  const mapPadding = 20;\n  let mapSvg = d3.select(\"#map\")\n    .attr(\"width\", mapWidth)\n    .attr(\"height\", mapHeight);\n\n    let extent = {\n      'type': 'Feature',\n      'geometry': {\n      'type': 'Polygon',\n      'coordinates': [[[10, 70], [35, 70], [10, 30], [35, 30]]]\n      }\n    }\n  const projection = d3.geoAzimuthalEqualArea()\n    .rotate([-10,-52,0]);\n  projection.fitExtent([[mapPadding, mapPadding + 25], [mapWidth - mapPadding, mapHeight - mapPadding]], extent);\n\n  const geoPath = d3.geoPath()\n    .projection(projection);\n\n  let countries = mapSvg.selectAll('path')\n    .data(geodata.features)\n    .enter().append('path')\n    .attr(\"id\", (d) => d.properties.ADM0_A3)\n    .attr(\"class\", \"country\")\n    .attr(\"d\", geoPath)\n    .style(\"fill\", \"#0D1730\")\n    .style(\"filter\", \"url(#glow)\");\n\n  const grid = {\n    ALB: { x: 5, y: 8 },\n    ARM: { x: 9, y: 6 },\n    AUS: { x: 9, y: 9 },\n    AUT: { x: 4, y: 5 },\n    AZE: { x: 9, y: 5 },\n    BEL: { x: 2, y: 3 },\n    BGR: { x: 7, y: 6 },\n    BIH: { x: 5, y: 6 },\n    BLR: { x: 6, y: 3 },\n    CHE: { x: 3, y: 4 },\n    CYP: { x: 8, y: 7 },\n    CZE: { x: 4, y: 4 },\n    DEU: { x: 4, y: 3 },\n    DNK: { x: 4, y: 2 },\n    ESP: { x: 1, y: 5 },\n    EST: { x: 6, y: 1 },\n    FIN: { x: 6, y: 0 },\n    FRA: { x: 1, y: 4 },\n    GBR: { x: 1, y: 2 },\n    GEO: { x: 8, y: 5 },\n    GRC: { x: 6, y: 8 },\n    HUN: { x: 5, y: 5 },\n    HRV: { x: 4, y: 6 },\n    IRL: { x: 0, y: 2 },\n    ISL: { x: 0, y: 0 },\n    ISR: { x: 8, y: 8 },\n    ITA: { x: 3, y: 5 },\n    KOS: { x: 6, y: 7 },\n    LTU: { x: 6, y: 2 },\n    LUX: { x: 2, y: 4 },\n    LVA: { x: 7, y: 2 },\n    MDA: { x: 7, y: 5 },\n    MKD: { x: 7, y: 7 },\n    MLT: { x: 1, y: 7 },\n    MNE: { x: 5, y: 7 },\n    NLD: { x: 3, y: 3 },\n    NOR: { x: 4, y: 0 },\n    POL: { x: 5, y: 3 },\n    PRT: { x: 0, y: 5 },\n    ROU: { x: 6, y: 5 },\n    RUS: { x: 7, y: 3 },\n    SMR: { x: 2, y: 6 },\n    SRB: { x: 6, y: 6 },\n    SVK: { x: 5, y: 4 },\n    SVN: { x: 3, y: 6 },\n    SWE: { x: 5, y: 0 },\n    UKR: { x: 6, y: 4 },\n    TUR: { x: 8, y: 6 }\n  }\n\n  /*COLOR MAP*/\n  let filtervalues = {\n    \"country\": \"BEL\",\n    \"fromto\": \"from\",\n    \"searchtele\": \"search\"\n  }\n\n  const cols = d3.scaleSequential(d3.interpolatePlasma)\n    .domain([1,12]);\n\n  function getCountryVotingData(filterparams) {\n    let countryVotingData = votingdata.filter((el) => el[filterparams.fromto] == filterparams.country)\n    let countryVoting = countryVotingData.map(el => {\n      const obj = {};\n      obj.to = el.to;\n      obj.from = el.from;\n      obj.points = el[filterparams.searchtele];\n      return obj;\n    })\n    //countryVoting = countryVoting.filter((cntr) => cntr.points > 0)\n    return countryVoting;\n  }\n\n  function colorMap(filterparams){\n    let countrydata = getCountryVotingData(filterparams);\n    let reversefromto = \"from\";\n    if(filterparams.fromto == \"from\"){\n      reversefromto = \"to\"\n    }\n    countries.transition().duration(1000).style(\"fill\", (d) => {\n      let countrypoints = countrydata.filter((el) => el[reversefromto] == d.properties.ADM0_A3);\n      if(countrypoints.length == 1 && countrypoints[0].points > 0){\n        let points = countrypoints[0].points;\n        return cols(points);\n      }\n      else{\n        return \"#0D1730\";\n      }\n    })\n  };\n  colorMap(filtervalues);\n\n  /*MAP UPDATES*/\n  const rectDim = 48;\n  const gridMargin = 120/rectDim;\n  function rectToPath(x, y, dim){\n    x = x + gridMargin;\n    y = y + gridMargin;\n    return `M${x*rectDim},${y*rectDim} L${x*rectDim + dim},${y*rectDim} L${x*rectDim + dim},${y*rectDim + dim} L${x*rectDim},${y*rectDim + dim} L${x*rectDim},${y*rectDim}`\n  }\n\n  d3.selectAll(\"input.mapswitch\").on(\"change\", function(){\n    let selvalue = d3.select(this).node().value;\n    if(selvalue == \"rects\"){\n      mapSvg.selectAll(\"path.country\")\n        .transition().duration(2000)\n        .attrTween(\"d\", function(){\n          return combine(splitPathString(d3.select(this).attr(\"d\")),\n            rectToPath(grid[d3.select(this).attr(\"id\")].x, grid[d3.select(this).attr(\"id\")].y, rectDim),\n            {\"single\": true}\n          )\n        });\n        setTimeout(function () {\n          let country;\n          for (country in grid) {\n              var bbox = mapSvg.select(\"path#\" + country).node().getBBox();\n              var translate = mapSvg.select(\"path#\" + country).node().getCTM();\n              var labelx = bbox.x + bbox.width / 2 + translate.e;\n              var labely = bbox.y + bbox.height / 2 + translate.f;\n              d3.select(\"#map\").append(\"text\")\n                  .attr(\"x\", labelx)\n                  .attr(\"y\", (labely + 4))\n                  .attr(\"class\", \"map-label\")\n                  .text(country);\n          }\n      }, 2000);\n    }\n    if(selvalue == \"geo\"){\n      mapSvg.selectAll(\"path.country\")\n        .transition().duration(2000)\n        .attrTween(\"d\", function(d){\n          let cntr = d3.select(this).attr(\"id\");\n          return separate(d3.select(this).attr(\"d\"),\n          splitPathString(geoPath(geodata.features.filter((el) => el.properties.ADM0_A3 == cntr)[0])),\n          {\"single\": true}\n          )\n        });\n      d3.selectAll(\".map-label\").remove();\n    }\n  })\n\n  d3.select(\"#countrylist\").on(\"change\", function(){\n    filtervalues.country = d3.select(this).node().value;\n    colorMap(filtervalues);\n  })\n\n  d3.selectAll(\"input.fromtoswitch\").on(\"change\", function(){\n    filtervalues.fromto = d3.select(this).node().value;\n    colorMap(filtervalues);\n  })\n\n  d3.selectAll(\"input.searchteleswitch\").on(\"change\", function(){\n    filtervalues.searchtele = d3.select(this).node().value;\n    colorMap(filtervalues);\n  })\n\n  /*SCATTER TOTAL*/\n  //Calculate total points awarded to each country over the 15 years\n  let pointsMean = d3.nest()\n    .key((d) => d.to)\n    .rollup((d) => {return {\n      searchpoints: d3.mean(d, (g) => g.searchpoints),\n      votepoints: d3.mean(d, (g) => g.votepoints)\n    }})\n    .entries(points);\n  \n  const maxSearchPoints = d3.max(pointsMean, (d) => d.value.searchpoints);\n  const maxVotePoints = d3.max(pointsMean, (d) => d.value.votepoints);\n  const maxPoints = d3.max([maxSearchPoints, maxVotePoints]);\n\n  const scatterWidth = 800;\n  const scatterHeight = 600;\n\n  const scatterMargins = {top: 20, right: 40, bottom: 40, left: 40};\n\n  let scatterOverallSvg = d3.select(\"svg#scatter\")\n    .attr(\"width\", scatterWidth)\n    .attr(\"height\", scatterHeight)\n    .append(\"g\")\n      .attr(\"transform\", `translate(${scatterMargins.left},${scatterMargins.top})`);\n  \n  let defs = scatterOverallSvg.append(\"defs\");\n\n  let filter = defs.append(\"filter\")\n    .attr(\"id\",\"glow\")\n    .attr(\"x\", \"-50%\")\n    .attr(\"y\", \"-50%\")\n    .attr(\"width\", \"200%\")\n    .attr(\"height\", \"200%\");\n  filter.append(\"feGaussianBlur\")\n    .attr(\"stdDeviation\",\"4\")\n    .attr(\"result\",\"coloredBlur\");\n  let feMerge = filter.append(\"feMerge\");\n  feMerge.append(\"feMergeNode\")\n    .attr(\"in\",\"coloredBlur\");\n  feMerge.append(\"feMergeNode\")\n    .attr(\"in\",\"SourceGraphic\");\n  \n  let scatterScaleX = d3.scaleLinear()\n    .domain([0,maxPoints])\n    .range([0,scatterWidth - scatterMargins.right]);\n  \n  let scatterScaleY = d3.scaleLinear()\n    .domain([0,maxPoints])\n    .range([scatterHeight - scatterMargins.bottom, scatterMargins.top]);\n\n  let xAxis = d3.axisBottom(scatterScaleX)\n    .tickValues([50,100,150])\n    .tickSize(-scatterHeight);\n  let yAxis = d3.axisLeft(scatterScaleY)\n    .tickValues([50,100,150,200])\n    .ticks(5)\n    .tickSize(-scatterWidth);\n\n  scatterOverallSvg.append(\"g\")\n    .attr(\"class\", \"axis x-axis\")\n    .attr(\"transform\", `translate(0,${scatterHeight - scatterMargins.bottom})`)\n    .call(xAxis);\n  scatterOverallSvg.append(\"text\")\n    .text(\"Search activity points\")\n    .attr(\"x\", scatterWidth - 50)\n    .attr(\"y\", scatterHeight - 30)\n    .attr(\"class\", \"x axis-title\")\n  scatterOverallSvg.append(\"text\")\n    .text(\"Televoting points\")\n    .attr(\"x\", -20)\n    .attr(\"y\", 10)\n    .attr(\"class\", \"y axis-title\")\n\n  scatterOverallSvg.append(\"g\")\n    .attr(\"class\", \"axis y-axis\")\n    .attr(\"transform\", `translate(0,0)`)\n    .call(yAxis);\n\n  scatterOverallSvg.append(\"line\")\n    .attr(\"x1\", scatterScaleX(0))\n    .attr(\"x2\", scatterScaleX(200))\n    .attr(\"y1\", scatterScaleY(0))\n    .attr(\"y2\", scatterScaleY(200))\n    .attr(\"class\", \"fourtyfive\")\n\n  scatterOverallSvg.selectAll(\"circle\")\n    .data(pointsMean)\n    .enter().append(\"circle\")\n    .attr(\"cx\", (d) => scatterScaleX(d.value.searchpoints))\n    .attr(\"cy\", (d) => scatterScaleY(d.value.votepoints))\n    .attr(\"r\", 5)\n    .attr(\"class\", \"circle-mean\")\n    .style(\"filter\", \"url(#glow)\")\n    .attr(\"id\", (d) => d.key);\n\n  let scatterLabels = [\n    {\"Russia\": \"end\"},\n    {\"Bulgaria\": \"middle\"},\n    {\"Serbia & Montenegro\": \"middle\"},\n    {\"Sweden\": \"start\"},\n    {\"Czech Republic\": \"start\"}\n  ]\n\n  let labeldata = pointsMean.filter((d) => {\n    return d.key == \"Russia\" || d.key == \"Bulgaria\" || d.key == \"Serbia and Montenegro\" || d.key == \"Sweden\" || d.key == \"Czech Republic\"  || d.key == \"Italy\" || d.key == \"Turkey\" || d.key == \"Ukraine\"\n  })\n\n  scatterOverallSvg.selectAll(\"text.label\")\n    .data(labeldata)\n    .enter().append(\"text\")\n    .attr(\"x\", (d) => scatterScaleX(d.value.searchpoints))\n    .attr(\"y\", (d) => scatterScaleY(d.value.votepoints))\n    .text((d) => d.key)\n    .attr(\"class\", \"scatter-label\")\n    .attr(\"dy\", -10);\n\n  });\n\n}\n\nexport default { init, resize };\n","const fallbackData = [\n  {\n    image: '2018_02_stand-up',\n    url: '2018/02/stand-up',\n    hed: 'The Structure of Stand-Up Comedy',\n  },\n  {\n    image: '2018_04_birthday-paradox',\n    url: '2018/04/birthday-paradox',\n    hed: 'The Birthday Paradox Experiment',\n  },\n  {\n    image: '2018_11_boy-bands',\n    url: '2018/11/boy-bands',\n    hed: 'Internet Boy Band Database',\n  },\n  {\n    image: '2018_08_pockets',\n    url: '2018/08/pockets',\n    hed: 'Womens Pockets are Inferior',\n  },\n];\n\nlet storyData = null;\n\nfunction loadJS(src, cb) {\n  const ref = document.getElementsByTagName('script')[0];\n  const script = document.createElement('script');\n  script.src = src;\n  script.async = true;\n  ref.parentNode.insertBefore(script, ref);\n\n  if (cb && typeof cb === 'function') {\n    script.onload = cb;\n  }\n\n  return script;\n}\n\nfunction loadStories(cb) {\n  const request = new XMLHttpRequest();\n  const v = Date.now();\n  const url = `https://pudding.cool/assets/data/stories.json?v=${v}`;\n  request.open('GET', url, true);\n\n  request.onload = () => {\n    if (request.status >= 200 && request.status < 400) {\n      const data = JSON.parse(request.responseText);\n      cb(data);\n    } else cb(fallbackData);\n  };\n\n  request.onerror = () => cb(fallbackData);\n\n  request.send();\n}\n\nfunction createLink(d) {\n  return `\n\t<a class='footer-recirc__article' href='https://pudding.cool/${\n    d.url\n  }' target='_blank'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${\n      d.image\n    }.jpg' alt='${d.hed}'>\n\t\t<p class='article__headline'>${d.hed}</p>\n\t</a>\n\t`;\n}\n\nfunction recircHTML() {\n  const url = window.location.href;\n  const html = storyData\n    .filter(d => !url.includes(d.url))\n    .slice(0, 4)\n    .map(createLink)\n    .join('');\n\n  d3.select('.pudding-footer .footer-recirc__articles').html(html);\n}\n\nfunction setupSocialJS() {\n  // facebook\n  (function(d, s, id) {\n    let js;\n\n    const fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.src = '//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7';\n    fjs.parentNode.insertBefore(js, fjs);\n  })(document, 'script', 'facebook-jssdk');\n\n  loadJS('https://platform.twitter.com/widgets.js');\n}\n\nfunction init() {\n  loadStories(data => {\n    storyData = data;\n\n    recircHTML();\n    setupSocialJS();\n  });\n}\n\nexport default { init };\n","/* global d3 */\nimport debounce from 'lodash.debounce';\nimport isMobile from './utils/is-mobile';\nimport graphic from './graphic';\nimport footer from './footer';\n\nconst $body = d3.select('body');\nlet previousWidth = 0;\n\nfunction resize() {\n  // only do resize on width changes, not height\n  // (remove the conditional if you want to trigger on height change)\n  const width = $body.node().offsetWidth;\n  if (previousWidth !== width) {\n    previousWidth = width;\n    graphic.resize();\n  }\n}\n\nfunction setupStickyHeader() {\n  const $header = $body.select('header');\n  if ($header.classed('is-sticky')) {\n    const $menu = $body.select('.header__menu');\n    const $toggle = $body.select('.header__toggle');\n    $toggle.on('click', () => {\n      const visible = $menu.classed('is-visible');\n      $menu.classed('is-visible', !visible);\n      $toggle.classed('is-visible', !visible);\n    });\n  }\n}\n\nfunction init() {\n  // add mobile class to body tag\n  $body.classed('is-mobile', isMobile.any());\n  // setup resize event\n  window.addEventListener('resize', debounce(resize, 150));\n  // setup sticky header menu\n  setupStickyHeader();\n  // kick off graphic code\n  graphic.init();\n  footer.init();\n}\n\ninit();\n"]}